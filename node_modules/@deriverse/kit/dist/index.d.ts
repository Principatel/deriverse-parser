import { Address, Base64EncodedDataResponse, Rpc, IAccountMeta, Commitment } from "@solana/kit";
import { Instrument, GetClientSpotOrdersInfoResponse, GetClientSpotOrdersArgs, GetClientSpotOrdersResponse, SpotOrderCancelArgs, GetClientDataResponse, GetClientSpotOrdersInfoArgs, SpotLpArgs, getInstrAccountByTagArgs, GetInstrIdArgs, NewSpotOrderArgs, DepositArgs, WithdrawArgs, SpotQuotesReplaceArgs, SpotMassCancelArgs, InstrId, GetClientPerpOrdersInfoArgs, GetClientPerpOrdersInfoResponse, GetClientPerpOrdersArgs, GetClientPerpOrdersResponse, PerpDepositArgs, NewPerpOrderArgs, PerpQuotesReplaceArgs, PerpOrderCancelArgs, PerpMassCancelArgs, CommunityData, LogMessage, PerpChangeLeverageArgs, PerpStatisticsResetArgs, EngineArgs, NewInstrumentArgs, PerpBuySeatArgs, SwapArgs, PerpSellSeatArgs } from './types';
import { InstrAccountHeaderModel, RootStateModel, TokenStateModel } from "./structure_models";
export * from './types';
export * from './logs_models';
/**
 * Get price step between orderbook lines depending on curent price
 * @param price Current market price
 * @returns Price step
 */
export declare function getSpotPriceStep(price: number): number;
/**
 * Get price step between orderbook lines depending on curent price
 * @param price Current market price
 * @returns Price step
 */
export declare function getPerpPriceStep(price: number): number;
/**
 * Main class to operate with Deriverse
 * @property {number} originalClientId Deriverse main client ID
 * @property {AddressLookupTableAccount} lut Root address lookup table account
 * @property {AddressLookupTableAccount} clientLut Client address lookup table account
 * @property {Map<number, Token>} tokens Tokens data
 * @property {Map<number, Instrument>} instruments Instruments data
 */
export declare class Engine {
    programId: Address<any>;
    rootStateModel: RootStateModel;
    community: CommunityData;
    private rpc;
    private drvsAuthority;
    rootAccount: Address<any>;
    communityAccount: Address<any>;
    private signer?;
    originalClientId?: number;
    private clientPrimaryAccount?;
    private clientCommunityAccount?;
    clientLutAddress?: Address<any>;
    private refClientPrimaryAccount?;
    private refClientCommunityAccount?;
    privateMode?: boolean;
    tokens: Map<number, TokenStateModel>;
    instruments: Map<number, Instrument>;
    version: number;
    commitment: Commitment;
    private uiNumbers;
    /**
     * @param rpc @solana/kit rpc
     */
    constructor(rpc: Rpc<any>, args?: EngineArgs);
    logsDecode(data: readonly string[]): LogMessage[];
    private findAccountsByTag;
    /**
     * After creation you have to initialize Engine
     */
    initialize(): Promise<boolean>;
    addToken(tokenAccount: Address): Promise<void>;
    addInstr(instrAccount: Address): Promise<void>;
    updateCommunityFromBuffer(data: Base64EncodedDataResponse): void;
    updateCommunity(): Promise<void>;
    updateRootFromBuffer(data: Base64EncodedDataResponse): void;
    updateRoot(): Promise<void>;
    getInstrAccountByTag(args: getInstrAccountByTagArgs): Promise<Address>;
    getAccountByTag(tag: number): Promise<Address>;
    getSpotContext(instrAccountHeaderModel: InstrAccountHeaderModel): Promise<IAccountMeta[]>;
    getPerpContext(instrAccountHeaderModel: InstrAccountHeaderModel): Promise<IAccountMeta[]>;
    getSpotCandles(instrAccountHeaderModel: InstrAccountHeaderModel): Promise<IAccountMeta[]>;
    getTokenAccount(mint: Address): Promise<Address>;
    /**
     * Get Token ID from mint public key if this token registered on Deriverse
     * @param mint Public key
     * @returns Token ID
     */
    getTokenId(mint: Address): Promise<number | null>;
    /**
     * Get intrument ID if this instrument registered on Deriverse
     * @param args Base crncy Token ID and asset token ID
     * @returns Instrument ID
     */
    getInstrId(args: GetInstrIdArgs): Promise<number | null>;
    /**
     * Assignes client public key to Engine
     * @param signer Client public key
     */
    setSigner(signer: Address<any>): Promise<void>;
    private findClientPrimaryAccount;
    private findClientCommunityAccount;
    private checkClient;
    /**
     * Unpack client accounts
     * @returns All client data that are in client accounts
     */
    getClientData(): Promise<GetClientDataResponse>;
    private tokenDec;
    /**
     * Get general information about open orders in particular instrument (spot)
     * @param args Contains data from getClientData function
     * @returns General information about open orders (spot)
     */
    getClientSpotOrdersInfo(args: GetClientSpotOrdersInfoArgs): Promise<GetClientSpotOrdersInfoResponse>;
    /**
     * Get general information about open orders in particular instrument (perp)
     * @param args Contains data from getClientData function
     * @returns General information about open orders (perp)
     */
    getClientPerpOrdersInfo(args: GetClientPerpOrdersInfoArgs): Promise<GetClientPerpOrdersInfoResponse>;
    /**
     * Get list of open orders (spot) in particular instrument
     * @param args Contains data from getClientSpotOrdersInfo
     * @returns List of open orders
     */
    getClientSpotOrders(args: GetClientSpotOrdersArgs): Promise<GetClientSpotOrdersResponse>;
    /**
     * Get list of open orders (perp) in particular instrument
     * @param args Contains data from getClientSpotOrdersInfo
     * @returns List of open orders
     */
    getClientPerpOrders(args: GetClientPerpOrdersArgs): Promise<GetClientPerpOrdersResponse>;
    /**
     * Unpack market data to Engine fields, you can use this function to subscribe to Solana account
     * @param buf Engine Instrument Dynamic Account data
     */
    updateInstrDataFromBuffer(data: Base64EncodedDataResponse): Promise<void>;
    /**
     * Get AddressLookupTableAccount to compile Versioned Transaction with this instrument (spot + derivatives)
     * @param args Instrument ID
     * @returns AddressLookupTableAccount for instrument
     */
    instrLut(args: InstrId): Address;
    /**
     * Update market data on Engine fields
     * @param args Instrument ID
     */
    updateInstrData(args: InstrId): Promise<void>;
    /**
      * Build instruction to deposit SPL tokens
      * @param args Order data
      * @returns Transaction instruction
      */
    depositInstruction(args: DepositArgs): Promise<any>;
    /**
     * Build instruction to withdraw SPL tokens
     * @param args Order data
     * @returns Transaction instruction
     */
    withdrawInstruction(args: WithdrawArgs): Promise<any>;
    /**
     * Build instruction to trade spot LP tokens in particular instrument
     * @param args Order data
     * @returns Trabsaction instruction
     */
    spotLpInstruction(args: SpotLpArgs): Promise<any>;
    /**
     * Build instruction to add new spot order in particular instrument
     * @param args Order data
     * @returns Transaction instruction
     */
    newSpotOrderInstruction(args: NewSpotOrderArgs): Promise<any>;
    /**
     * Build instruction to spot quotes replacement in particular instrument
     * @param args Order data
     * @returns Transaction instruction
     */
    spotQuotesReplaceInstruction(args: SpotQuotesReplaceArgs): Promise<any>;
    /**
     * Build instruction to cancel spot order in particular instrument
     * @param args Order data
     * @returns Transaction instruction
     */
    spotOrderCancelInstruction(args: SpotOrderCancelArgs): Promise<any>;
    /**
     * Build instruction for spot mass cancel in particular instrument
     * @param args Order data
     * @returns Transaction instruction
     */
    spotMassCancelInstruction(args: SpotMassCancelArgs): Promise<any>;
    /**
       * Build upgrade to PERP instructions
       * @param args Order data
       * @returns Transaction instruction
       */
    upgradeToPerpInstructions(args: InstrId): Promise<any[]>;
    /**
     * Build instruction for perp deposit in particular instrument
     * @param args Order data
     * @returns Transaction instruction
     */
    perpDepositInstruction(args: PerpDepositArgs): Promise<any>;
    /**
     * Build instruction for perp buy seat in particular instrument
     * @param args Order data
     * @returns Transaction instruction
     */
    perpBuySeatInstruction(args: PerpBuySeatArgs): Promise<any>;
    perpSellSeatInstruction(args: PerpSellSeatArgs): Promise<any>;
    /**
     * Build instruction for new perp order in particular instrument
     * @param args Order data
     * @returns Transaction instruction
     */
    newPerpOrderInstruction(args: NewPerpOrderArgs): Promise<any>;
    /**
     * Build instruction for perp quotes replace in particular instrument
     * @param args Order data
     * @returns Transaction instruction
     */
    perpQuotesReplaceInstruction(args: PerpQuotesReplaceArgs): Promise<any>;
    /**
     * Build instruction for perp order cancel in particular instrument
     * @param args Order data
     * @returns Transaction instruction
     */
    perpOrderCancelInstruction(args: PerpOrderCancelArgs): Promise<any>;
    /**
     * Build instruction for perp mass cancel in particular instrument
     * @param args Order data
     * @returns Transaction instruction
     */
    perpMassCancelInstruction(args: PerpMassCancelArgs): Promise<any>;
    /**
     * Build instruction for new referral link
     * @returns Transaction instruction
    */
    newRefLinkInstruction(): Promise<any>;
    /**
     * Build instruction for change leverage in particular instrument
     * @param args Transaction data
     * @returns Transaction instruction
     */
    perpChangeLeverageInstruction(args: PerpChangeLeverageArgs): Promise<any>;
    /**
     * Build instruction for statistics reset in particular instrument
     * @param args Transaction data
     * @returns Transaction instruction
     */
    perpStatisticsResetInstruction(args: PerpStatisticsResetArgs): Promise<any>;
    /**
       * Build new instrument instructions
       * @param args New instrument data
       * @returns Transaction instruction
       */
    newInstrumentInstructions(args: NewInstrumentArgs): Promise<any[]>;
    /**
     * Build instruction for durect swap
     * @param args Order data
     * @returns Transaction instruction
     */
    swapInstruction(args: SwapArgs): Promise<any>;
}
